<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Alumni Dashboard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://sdk.amazonaws.com/js/aws-sdk-2.7.16.min.js"></script> 
  <script src="javascript-files/amazon-cognito-identity.min.js"></script>
  <style>
    body { margin:0; padding:0; font-family:'Segoe UI',Arial,sans-serif; background:#f4f8fb; color:#1a2236; }
    .dashboard-layout{display:flex;min-height:100vh;background:#f4f8fb;}
    
    /* Sidebar */
    .sidebar{width:260px;background:linear-gradient(160deg,#1d3354 0%,#0072ff 100%);color:#fff;display:flex;flex-direction:column;align-items:flex-start;min-height:100vh;}
    
    /* Sidebar Profile */
    .sidebar-profile{
      width:100%;
      display:flex;
      flex-direction:column;
      align-items:flex-start;
      padding:36px 24px 24px 24px;
      border-bottom:1px solid #26446c44;
    }
    .sidebar-profile img{
      width:70px;
      height:70px;
      border-radius:50%;
      background:#fff;
      border:2.5px solid #fff;
      box-shadow:0 2px 12px #0072ff22;
    }
    .profile-info{
      display:flex;
      flex-direction:column;
      margin-top:12px;
      width: 100%;
    }
    .profile-name{
      font-size:1.25em;
      font-weight:600;
      color:#ffe082;
      margin-bottom:3px;
    }
    .profile-email{
      font-size:0.97em;
      color:#e0e7ef;
      margin-top:10px;
    }

    /* Logout Button (original style) */
    .logout-btn{
      margin-top:15px;
      background:#ff4b5c;
      color:#fff;
      border:none;
      border-radius:6px;
      padding:10px 18px;
      font-size:0.95em;
      cursor:pointer;
      transition:0.2s;
    }
    .logout-btn:hover{background:#ff2e44;}

    /* Sidebar Navigation */
    .sidebar nav{width:100%;flex:1;}
    .sidebar nav ul{list-style:none;margin:0;padding:0;}
    .sidebar nav li{width:100%;}
    .sidebar nav a{
      display:flex;align-items:center;color:#fff;padding:14px 30px;text-decoration:none;font-size:1.09em;
      letter-spacing:0.4px;border-left:5px solid transparent;transition:background 0.18s,border-left 0.18s,color 0.17s;margin-bottom:3px;
    }
    .sidebar nav a i{margin-right:17px;font-size:1.19em;}
    .sidebar nav a:hover,.sidebar nav a:focus{
      background:#185abd;border-left:5px solid #ffe082;color:#ffe082;
    }

    /* Main Content */
    .main-content{flex:1;padding:0 48px;background:#f4f8fb;display:flex;flex-direction:column;}
    .topnav{display:flex;align-items:center;justify-content:space-between;background:#fff;padding:22px 0;border-bottom:1.5px solid #e5e7eb;margin-bottom:18px;}
    .system-title{font-size:1.28em;font-weight:600;color:#1d3354;letter-spacing:1.1px;}
    .system-title i{color:#0072ff;margin-right:10px;}
    .profile-avatar{width:52px;height:52px;border-radius:50%;display:block;overflow:hidden;border:2.5px solid #0072ff;box-shadow:0 4px 18px 0 #0072ff23;transition:0.17s;}
    .profile-avatar img{width:100%;height:100%;object-fit:cover;}
    .profile-avatar:hover{box-shadow:0 6px 30px 0 #ffe082aa;border-color:#ffe082;transform:scale(1.08) rotate(-2deg);}

    /* Dashboard Cards */
    .dashboard-heading{font-size:1.18em;color:#1d3354;font-weight:500;margin:28px 0 20px 0;letter-spacing:0.7px;}
    .card-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:30px;margin-bottom:40px;}
    .dashboard-card{background:#fff;border-radius:13px;box-shadow:0 4px 22px 0 #0072ff0c;display:flex;flex-direction:column;align-items:center;padding:34px 16px 28px;transition:0.2s;border-top:5px solid #ffe082;}
    .dashboard-card:hover{box-shadow:0 8px 44px 0 #0072ff18;transform:translateY(-6px) scale(1.03);}
    .card-icon{margin-bottom:13px;font-size:2.7em;}
    .card-title{font-size:1.14em;font-weight:600;color:#1d3354;margin-bottom:9px;}
    .card-info{text-align:center;font-size:0.95em;color:#555;margin-bottom:12px;}
    .card-btn{background:linear-gradient(90deg,#0072ff 0%,#36d1c4 100%);color:#fff;border:none;border-radius:6px;padding:8px 20px;font-size:0.96em;font-weight:500;text-decoration:none;margin-top:7px;cursor:pointer;transition:0.18s;}
    .card-btn:hover{background:linear-gradient(90deg,#36d1c4 0%,#0072ff 100%);color:#ffe082;transform:scale(1.04);}
  </style>
</head>
<body>

<div class="dashboard-layout">

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-profile">
      <img id="profilePic" src="https://ui-avatars.com/api/?name=User&background=0072ff&color=fff&rounded=true" alt="Profile" />
      <div class="profile-info">
        <span id="profileName" class="profile-name">User Name</span>
        <span id="profileEmail" class="profile-email">user@example.com</span>
        <button class="logout-btn" onclick="logout()">Logout</button>
      </div>
    </div>
    <nav>
      <ul>
        <li><a href="#"><i class="fa-solid fa-user"></i> Profile Summary</a></li>
        <li><a href="#"><i class="fa-solid fa-newspaper"></i> Recent Announcements</a></li>
        <li><a href="#"><i class="fa-solid fa-calendar-days"></i> Upcoming Events</a></li>
        <li><a href="#"><i class="fa-solid fa-users"></i> Networking</a></li>
        <li><a href="#"><i class="fa-solid fa-comments"></i> Messaging</a></li>
        <li><a href="#"><i class="fa-solid fa-file-signature"></i> Apply for Jobs</a></li>
        <li><a href="#"><i class="fa-solid fa-lightbulb"></i> Resources & Mentorship</a></li>
      </ul>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <div class="topnav">
      <span class="system-title"><i class="fa-solid fa-graduation-cap"></i> ALUMNI DASHBOARD</span>
      <a href="profile-edit.html" class="profile-avatar">
        <img id="topProfilePic" src="https://ui-avatars.com/api/?name=User&background=0072ff&color=fff&rounded=true" alt="Update Profile" />
      </a>
    </div>

    <h2 class="dashboard-heading" id="welcomeMessage">Welcome Back!</h2>

    <div class="card-grid">
      <div class="dashboard-card">
        <div class="card-icon"><i class="fa-solid fa-newspaper"></i></div>
        <div class="card-title">Recent Announcements</div>
        <p class="card-info">Latest updates, alumni news, and notices.</p>
        <a href="announcements_alumni.html" class="card-btn">View Announcements</a>
      </div>
      <div class="dashboard-card">
        <div class="card-icon"><i class="fa-solid fa-calendar-days"></i></div>
        <div class="card-title">Upcoming Events</div>
        <p class="card-info">Check upcoming reunions, seminars, and events.</p>
        <a href="events_alumni.html" class="card-btn">View Events</a>
      </div>
      <div class="dashboard-card">
        <div class="card-icon"><i class="fa-solid fa-users"></i></div>
        <div class="card-title">Networking & Mentorships</div>
        <p class="card-info">Connect with alumni and expand your network.</p>
        <a href="updates.html" class="card-btn">Start to connect</a>
      </div>
      <div class="dashboard-card">
        <div class="card-icon"><i class="fa-solid fa-comments"></i></div>
        <div class="card-title">Donations</div>
        <p class="card-info">Contribute by donating money to the college</p>
        <a href="donations.html" class="card-btn">Donate and Create funds</a>
      </div>
      <div class="dashboard-card">
        <div class="card-icon"><i class="fa-solid fa-briefcase"></i></div>
        <div class="card-title">Post Jobs</div>
        <p class="card-info">Help juniors by posting job opportunities.</p>
        <a href="jobs_alumni.html" class="card-btn">Post and view Jobs</a>
      </div>
    </div>
  </main>
</div>

<script>
  // Cognito Config
  var poolData = {
    UserPoolId : 'us-east-1_wZ1ovu0QY', 
    ClientId : '1cdbrfng4l7pe7n60597rejh34'
  };
  var userPool = new AmazonCognitoIdentity.CognitoUserPool(poolData);
  var cognitoUser = userPool.getCurrentUser();

  if (!cognitoUser) {
    window.location.replace("LoginForm.html");
  } else {
    cognitoUser.getSession(function(err, session){
      if(err || !session.isValid()){
        cognitoUser.signOut();
        window.location.replace("LoginForm.html");
      } else {
        cognitoUser.getUserAttributes(function(err, attributes){
          if(err){ console.log(err); return; }
          var name = attributes.find(attr => attr.Name==='name')?.Value || 'User';
          var email = attributes.find(attr => attr.Name==='email')?.Value || null;

          if(!email){
            alert("No email found. Please login first.");
            cognitoUser.signOut();
            window.location.replace("LoginForm.html");
            return;
          }

          localStorage.setItem("email", email);

          document.getElementById('profileName').innerText = name;
          document.getElementById('profileEmail').innerText = email;
          document.getElementById('welcomeMessage').innerText = 'Welcome Back, ' + name + '!';
          document.getElementById('profilePic').src = "https://ui-avatars.com/api/?name=" + encodeURIComponent(name) + "&background=0072ff&color=fff&rounded=true";
          document.getElementById('topProfilePic').src = "https://ui-avatars.com/api/?name=" + encodeURIComponent(name) + "&background=0072ff&color=fff&rounded=true";
        });
      }
    });
  }

  function logout(){
    if(cognitoUser){
      cognitoUser.signOut();
    }
    window.location.replace("Webpage.html");
  }
</script>

</body>
</html>
